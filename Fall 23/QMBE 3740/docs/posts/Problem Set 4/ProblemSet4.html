<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Xander Chapman">
<meta name="dcterms.date" content="2023-10-06">

<title>Xander Chapman - Data Mining: Problem Set 4</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../images/personal_logo.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Xander Chapman</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../posts.html" rel="" target="">
 <span class="menu-text">Posts</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../projects.html" rel="" target="">
 <span class="menu-text">Projects</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../resume.html" rel="" target="">
 <span class="menu-text">Resume</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/achapathamline/" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com" rel="" target=""><i class="bi bi-linkedin" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/" rel="" target=""><i class="bi bi-twitter" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#why-is-classification-the-right-approach-for-the-nvos-problem" id="toc-why-is-classification-the-right-approach-for-the-nvos-problem" class="nav-link active" data-scroll-target="#why-is-classification-the-right-approach-for-the-nvos-problem">Why is classification the right approach for the NVO’s problem?</a></li>
  <li><a href="#how-could-nvo-use-the-classifier-you-build-to-identify-potential-donors-why-could-it-be-better-than-what-theyve-been-doing" id="toc-how-could-nvo-use-the-classifier-you-build-to-identify-potential-donors-why-could-it-be-better-than-what-theyve-been-doing" class="nav-link" data-scroll-target="#how-could-nvo-use-the-classifier-you-build-to-identify-potential-donors-why-could-it-be-better-than-what-theyve-been-doing">How could NVO use the classifier you build to identify potential donors? Why could it be better than what they’ve been doing?</a></li>
  <li><a href="#which-measures-from-the-confusion-matrix-youll-use-to-evaluate-the-classifier-performance-and-how-they-relate-to-important-areas-like-mailer-response-rate-and-maximizing-donation-opportunities" id="toc-which-measures-from-the-confusion-matrix-youll-use-to-evaluate-the-classifier-performance-and-how-they-relate-to-important-areas-like-mailer-response-rate-and-maximizing-donation-opportunities" class="nav-link" data-scroll-target="#which-measures-from-the-confusion-matrix-youll-use-to-evaluate-the-classifier-performance-and-how-they-relate-to-important-areas-like-mailer-response-rate-and-maximizing-donation-opportunities">Which measures from the confusion matrix you’ll use to evaluate the classifier performance and how they relate to important areas like mailer response rate, and maximizing donation opportunities?</a></li>
  <li><a href="#build-a-logistic-lasso-model-using-cross-validation-on-the-training-data-to-select-the-best-.-view-the-coefficients-at-that-chosen-and-see-what-features-are-in-the-model" id="toc-build-a-logistic-lasso-model-using-cross-validation-on-the-training-data-to-select-the-best-.-view-the-coefficients-at-that-chosen-and-see-what-features-are-in-the-model" class="nav-link" data-scroll-target="#build-a-logistic-lasso-model-using-cross-validation-on-the-training-data-to-select-the-best-.-view-the-coefficients-at-that-chosen-and-see-what-features-are-in-the-model">Build a logistic LASSO model using cross-validation on the training data to select the best . View the coefficients at that chosen and see what features are in the model</a></li>
  <li><a href="#build-a-decision-tree-model-using-cross-validation-on-the-training-data-to-select-the-best-cp-value.-use-rpart.plot-to-view-the-decision-tree.-what-key-features-does-it-use" id="toc-build-a-decision-tree-model-using-cross-validation-on-the-training-data-to-select-the-best-cp-value.-use-rpart.plot-to-view-the-decision-tree.-what-key-features-does-it-use" class="nav-link" data-scroll-target="#build-a-decision-tree-model-using-cross-validation-on-the-training-data-to-select-the-best-cp-value.-use-rpart.plot-to-view-the-decision-tree.-what-key-features-does-it-use">Build a decision tree model using cross-validation on the training data to select the best cp value. Use rpart.plot() to view the decision tree. What key features does it use?</a></li>
  <li><a href="#evaluate-the-performance-on-test-data-and-look-at-and-describe-its-performance-according-to-your-confusion-matrix-measures" id="toc-evaluate-the-performance-on-test-data-and-look-at-and-describe-its-performance-according-to-your-confusion-matrix-measures" class="nav-link" data-scroll-target="#evaluate-the-performance-on-test-data-and-look-at-and-describe-its-performance-according-to-your-confusion-matrix-measures">Evaluate the performance on test data and look at and describe its performance according to your confusion matrix measures</a></li>
  <li><a href="#create-a-roc-plot-with-auc-to-compare-the-two-models-performance-and-explain-to-nvo-what-the-plot-tells-you" id="toc-create-a-roc-plot-with-auc-to-compare-the-two-models-performance-and-explain-to-nvo-what-the-plot-tells-you" class="nav-link" data-scroll-target="#create-a-roc-plot-with-auc-to-compare-the-two-models-performance-and-explain-to-nvo-what-the-plot-tells-you">Create a ROC plot (with AUC) to compare the two model’s performance and explain to NVO what the plot tells you</a></li>
  <li><a href="#pick-the-best-performing-model-and-view-its-precision-recall-chart-and-its-cumulative-gain-chart" id="toc-pick-the-best-performing-model-and-view-its-precision-recall-chart-and-its-cumulative-gain-chart" class="nav-link" data-scroll-target="#pick-the-best-performing-model-and-view-its-precision-recall-chart-and-its-cumulative-gain-chart">Pick the best performing model, and view its precision recall chart and its cumulative gain chart</a></li>
  <li><a href="#use-the-charts-from-parts-6-and-7-to-describe-how-the-model-should-perform-for-nvo-and-what-it-could-mean-if-they-do-a-mailer-campaign-for-50000-people" id="toc-use-the-charts-from-parts-6-and-7-to-describe-how-the-model-should-perform-for-nvo-and-what-it-could-mean-if-they-do-a-mailer-campaign-for-50000-people" class="nav-link" data-scroll-target="#use-the-charts-from-parts-6-and-7-to-describe-how-the-model-should-perform-for-nvo-and-what-it-could-mean-if-they-do-a-mailer-campaign-for-50000-people">Use the charts from parts 6 and 7 to describe how the model should perform for NVO and what it could mean if they do a mailer campaign for 50,000 people</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Data Mining: Problem Set 4</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Xander Chapman </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">October 6, 2023</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<section id="why-is-classification-the-right-approach-for-the-nvos-problem" class="level2">
<h2 class="anchored" data-anchor-id="why-is-classification-the-right-approach-for-the-nvos-problem">Why is classification the right approach for the NVO’s problem?</h2>
<p>Classification is the right approach for the NVO’s problem because they’re trying to categorize individuals into two distinct groups: those likely to donate and those who aren’t. By training a classification model on past data, NVO can predict the likelihood of a particular individual becoming a donor. This binary outcome (donor or not) makes it a classification problem rather than a regression problem where continuous outcomes are predicted.</p>
</section>
<section id="how-could-nvo-use-the-classifier-you-build-to-identify-potential-donors-why-could-it-be-better-than-what-theyve-been-doing" class="level2">
<h2 class="anchored" data-anchor-id="how-could-nvo-use-the-classifier-you-build-to-identify-potential-donors-why-could-it-be-better-than-what-theyve-been-doing">How could NVO use the classifier you build to identify potential donors? Why could it be better than what they’ve been doing?</h2>
<p>Once the classifier is built, NVO can use it to predict the likelihood of potential donors from a pool of candidates. When the organization receives data on a new set of individuals, the classifier can score each person based on the likelihood of them donating. Using this predictive model can potentially be more efficient than their previous methods because it leverages data to make informed decisions, reducing the costs of reaching out to unlikely donors and optimizing the targeting of potential donors.</p>
</section>
<section id="which-measures-from-the-confusion-matrix-youll-use-to-evaluate-the-classifier-performance-and-how-they-relate-to-important-areas-like-mailer-response-rate-and-maximizing-donation-opportunities" class="level2">
<h2 class="anchored" data-anchor-id="which-measures-from-the-confusion-matrix-youll-use-to-evaluate-the-classifier-performance-and-how-they-relate-to-important-areas-like-mailer-response-rate-and-maximizing-donation-opportunities">Which measures from the confusion matrix you’ll use to evaluate the classifier performance and how they relate to important areas like mailer response rate, and maximizing donation opportunities?</h2>
<p>To evaluate the classifier performance, we would look at measures like precision, recall, accuracy, and F1-score from the confusion matrix. Precision will tell us out of those predicted to be donors, how many were actual donors. Recall will tell us out of all actual donors, how many we correctly predicted. In the context of a mailer campaign, these metrics can guide decisions such as how many mailers to send out and to whom, thereby influencing the mailer response rate and maximizing donation opportunities.</p>
</section>
<section id="build-a-logistic-lasso-model-using-cross-validation-on-the-training-data-to-select-the-best-.-view-the-coefficients-at-that-chosen-and-see-what-features-are-in-the-model" class="level2">
<h2 class="anchored" data-anchor-id="build-a-logistic-lasso-model-using-cross-validation-on-the-training-data-to-select-the-best-.-view-the-coefficients-at-that-chosen-and-see-what-features-are-in-the-model">Build a logistic LASSO model using cross-validation on the training data to select the best . View the coefficients at that chosen and see what features are in the model</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load necessary libraries</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(caret)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(glmnet)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rpart)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rpart.plot)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ROCR)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(PRROC)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Load data</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"donors.csv"</span>)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Handle missing data</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="co"># For simplicity, we'll impute with median for numeric and mode for factors</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (col <span class="cf">in</span> <span class="fu">names</span>(data)) {</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">is.numeric</span>(data[, col])) {</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>    data[<span class="fu">is.na</span>(data[, col]), col] <span class="ot">&lt;-</span> <span class="fu">median</span>(data[, col], <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>    levels <span class="ot">&lt;-</span> <span class="fu">unique</span>(data[, col])</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>    data[<span class="fu">is.na</span>(data[, col]), col] <span class="ot">&lt;-</span> levels[<span class="fu">which.max</span>(<span class="fu">tabulate</span>(<span class="fu">match</span>(data[, col], levels)))]</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="build-a-decision-tree-model-using-cross-validation-on-the-training-data-to-select-the-best-cp-value.-use-rpart.plot-to-view-the-decision-tree.-what-key-features-does-it-use" class="level2">
<h2 class="anchored" data-anchor-id="build-a-decision-tree-model-using-cross-validation-on-the-training-data-to-select-the-best-cp-value.-use-rpart.plot-to-view-the-decision-tree.-what-key-features-does-it-use">Build a decision tree model using cross-validation on the training data to select the best cp value. Use rpart.plot() to view the decision tree. What key features does it use?</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(caret)       <span class="co"># for createDataPartition</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(glmnet)      <span class="co"># for cv.glmnet and coef</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rpart)       <span class="co"># for rpart and printcp</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rpart.plot)  <span class="co"># for rpart.plot</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Partition the data</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>train_index <span class="ot">&lt;-</span> <span class="fu">createDataPartition</span>(data<span class="sc">$</span>respondedMailing, <span class="at">p =</span> <span class="fl">0.75</span>, <span class="at">list =</span> <span class="cn">FALSE</span>)</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>train_data <span class="ot">&lt;-</span> data[train_index, ]</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>test_data <span class="ot">&lt;-</span> data[<span class="sc">-</span>train_index, ]</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Train a logistic LASSO model</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">model.matrix</span>(respondedMailing <span class="sc">~</span> ., <span class="at">data =</span> train_data)[, <span class="sc">-</span><span class="dv">1</span>]  <span class="co"># Design matrix</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> train_data<span class="sc">$</span>respondedMailing                                  <span class="co"># Response vector</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>cv_lasso <span class="ot">&lt;-</span> <span class="fu">cv.glmnet</span>(x, y, <span class="at">family =</span> <span class="st">"binomial"</span>)</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"LASSO Coefficients:</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>LASSO Coefficients:</code></pre>
</div>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">coef</span>(cv_lasso))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>81 x 1 sparse Matrix of class "dgCMatrix"
                                     s1
(Intercept)                -2.913942639
age                         .          
numberChildren              .          
incomeRating                .          
wealthRating                .          
mailOrderPurchases          .          
totalGivingAmount           .          
numberGifts                 0.006120926
smallestGiftAmount          .          
largestGiftAmount           .          
averageGiftAmount           .          
yearsSinceFirstDonation     .          
monthsSinceLastDonation    -0.005215548
inHouseDonorTRUE            .          
plannedGivingDonorTRUE      .          
sweepstakesDonorTRUE        .          
P3DonorTRUE                 .          
stateAE                     .          
stateAK                     .          
stateAL                     .          
stateAP                     .          
stateAR                     .          
stateAZ                     .          
stateCA                     .          
stateCO                     .          
stateCT                     .          
stateDC                     .          
stateDE                     .          
stateFL                     .          
stateGA                     .          
stateGU                     .          
stateHI                     .          
stateIA                     .          
stateID                     .          
stateIL                     .          
stateIN                     .          
stateKS                     .          
stateKY                     .          
stateLA                     .          
stateMA                     .          
stateMD                     .          
stateME                     .          
stateMI                     .          
stateMN                     .          
stateMO                     .          
stateMS                     .          
stateMT                     .          
stateNC                     .          
stateND                     .          
stateNE                     .          
stateNH                     .          
stateNJ                     .          
stateNM                     .          
stateNV                     .          
stateNY                     .          
stateOH                     .          
stateOK                     .          
stateOR                     .          
statePA                     .          
stateRI                     .          
stateSC                     .          
stateSD                     .          
stateTN                     .          
stateTX                     .          
stateUT                     .          
stateVA                     .          
stateVI                     .          
stateVT                     .          
stateWA                     .          
stateWI                     .          
stateWV                     .          
stateWY                     .          
urbanicityrural             .          
urbanicitysuburb            .          
urbanicitytown              .          
urbanicityurban             .          
socioEconomicStatushighest  .          
socioEconomicStatuslowest   .          
isHomeownerTRUE             .          
genderjoint                 .          
gendermale                  .          </code></pre>
</div>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Train a decision tree model</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>control <span class="ot">&lt;-</span> <span class="fu">rpart.control</span>(<span class="at">cp =</span> <span class="dv">0</span>, <span class="at">xval =</span> <span class="dv">10</span>)  <span class="co"># Setting up 10-fold CV</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>fit_tree <span class="ot">&lt;-</span> <span class="fu">rpart</span>(respondedMailing <span class="sc">~</span> ., <span class="at">data =</span> train_data, <span class="at">control =</span> control)</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Summarized output: Display top 10 rows of the complexity parameter table</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Top 10 rows of Decision Tree Complexity Parameter Table:</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Top 10 rows of Decision Tree Complexity Parameter Table:</code></pre>
</div>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(fit_tree<span class="sc">$</span>cptable, <span class="at">n =</span> <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>             CP nsplit rel error    xerror       xstd
1  0.0043055945      0 1.0000000 1.0000282 0.01530006
2  0.0008275100      1 0.9956944 0.9958987 0.01518176
3  0.0007895379      2 0.9948669 0.9959688 0.01516422
4  0.0006459476      3 0.9940774 0.9967859 0.01515820
5  0.0005473264      4 0.9934314 0.9982557 0.01515519
6  0.0005316038      5 0.9928841 0.9983005 0.01514662
7  0.0005228979      6 0.9923525 0.9985372 0.01514783
8  0.0004719240      7 0.9918296 0.9989994 0.01514004
9  0.0004682807      8 0.9913577 0.9990577 0.01513738
10 0.0004591742     11 0.9899528 0.9992902 0.01513749</code></pre>
</div>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rpart.plot</span>(fit_tree)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: labs do not fit even at cex 0.15, there may be some overplotting</code></pre>
</div>
<div class="cell-output-display">
<p><img src="ProblemSet4_files/figure-html/Decision Tree Model Building and Visualization-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="evaluate-the-performance-on-test-data-and-look-at-and-describe-its-performance-according-to-your-confusion-matrix-measures" class="level2">
<h2 class="anchored" data-anchor-id="evaluate-the-performance-on-test-data-and-look-at-and-describe-its-performance-according-to-your-confusion-matrix-measures">Evaluate the performance on test data and look at and describe its performance according to your confusion matrix measures</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(caret)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Performance on Test Data</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="co"># LASSO</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create model matrix for entire dataset</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>full_matrix <span class="ot">&lt;-</span> <span class="fu">model.matrix</span>(respondedMailing <span class="sc">~</span> ., <span class="at">data =</span> data)[, <span class="sc">-</span><span class="dv">1</span>]</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Split this matrix based on previously created train_index</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>train_matrix <span class="ot">&lt;-</span> full_matrix[train_index, ]</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>test_matrix <span class="ot">&lt;-</span> full_matrix[<span class="sc">-</span>train_index, ]</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Train the LASSO model using train_matrix</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>cv_lasso <span class="ot">&lt;-</span> <span class="fu">cv.glmnet</span>(train_matrix, y, <span class="at">family =</span> <span class="st">"binomial"</span>)</span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Now, for predictions, use test_matrix</span></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>probs_lasso <span class="ot">&lt;-</span> <span class="fu">predict</span>(cv_lasso, <span class="at">newx =</span> test_matrix, <span class="at">type =</span> <span class="st">"response"</span>)</span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Decision Tree</span></span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine the data</span></span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>combined_data <span class="ot">&lt;-</span> <span class="fu">rbind</span>(train_data, test_data)</span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert state to factor ensuring all levels are present</span></span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a>combined_data<span class="sc">$</span>state <span class="ot">&lt;-</span> <span class="fu">factor</span>(combined_data<span class="sc">$</span>state)</span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Split the data again</span></span>
<span id="cb12-26"><a href="#cb12-26" aria-hidden="true" tabindex="-1"></a>train_data <span class="ot">&lt;-</span> combined_data[<span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(train_data), ]</span>
<span id="cb12-27"><a href="#cb12-27" aria-hidden="true" tabindex="-1"></a>test_data <span class="ot">&lt;-</span> combined_data[(<span class="fu">nrow</span>(train_data) <span class="sc">+</span> <span class="dv">1</span>)<span class="sc">:</span><span class="fu">nrow</span>(combined_data), ]</span>
<span id="cb12-28"><a href="#cb12-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-29"><a href="#cb12-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Retrain the Decision Tree Model using the updated train_data</span></span>
<span id="cb12-30"><a href="#cb12-30" aria-hidden="true" tabindex="-1"></a>fit_tree <span class="ot">&lt;-</span> <span class="fu">rpart</span>(respondedMailing <span class="sc">~</span> ., <span class="at">data =</span> train_data, <span class="at">control =</span> control)</span>
<span id="cb12-31"><a href="#cb12-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-32"><a href="#cb12-32" aria-hidden="true" tabindex="-1"></a><span class="co"># Now try predicting again</span></span>
<span id="cb12-33"><a href="#cb12-33" aria-hidden="true" tabindex="-1"></a>predictions_tree <span class="ot">&lt;-</span> <span class="fu">predict</span>(fit_tree, <span class="at">newdata =</span> test_data, <span class="at">type =</span> <span class="st">"vector"</span>)</span>
<span id="cb12-34"><a href="#cb12-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-35"><a href="#cb12-35" aria-hidden="true" tabindex="-1"></a>confusion_tree <span class="ot">&lt;-</span> <span class="fu">table</span>(test_data<span class="sc">$</span>respondedMailing, predictions_tree)</span>
<span id="cb12-36"><a href="#cb12-36" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(confusion_tree)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       predictions_tree
            0 0.0153846153846154 0.0357142857142857 0.0526315789473684
  FALSE 17544                 23                  7                 57
  TRUE    922                  0                  0                  2
       predictions_tree
        0.0555555555555556 0.0588235294117647 0.0625 0.0666666666666667
  FALSE                 88                 62     65                 55
  TRUE                   2                  2      2                  6
       predictions_tree
        0.0714285714285714 0.0769230769230769 0.0833333333333333
  FALSE                 94                 97                 48
  TRUE                   4                  8                  6
       predictions_tree
        0.0909090909090909   0.1 0.102564102564103 0.105263157894737
  FALSE                 64   104                14                36
  TRUE                   1     7                 0                 1
       predictions_tree
        0.111111111111111 0.117647058823529 0.125 0.133333333333333
  FALSE               223                75   216                61
  TRUE                  9                 4    13                 3
       predictions_tree
        0.142857142857143 0.153846153846154 0.157894736842105 0.166666666666667
  FALSE               524                68                70               211
  TRUE                 36                 1                 3                 8
       predictions_tree
        0.176470588235294 0.181818181818182 0.1875   0.2 0.210526315789474
  FALSE                46                99     75   127                37
  TRUE                  1                 5      2     9                 3
       predictions_tree
        0.214285714285714 0.222222222222222 0.230769230769231 0.235294117647059
  FALSE               120               173               106                56
  TRUE                  4                11                 3                 6
       predictions_tree
         0.25 0.263157894736842 0.266666666666667 0.272727272727273
  FALSE   286                24                26                76
  TRUE     10                 2                 1                 5
       predictions_tree
        0.277777777777778 0.285714285714286 0.294117647058824   0.3
  FALSE                25               238                50    58
  TRUE                  0                10                 4     0
       predictions_tree
        0.307692307692308 0.3125 0.31578947368421 0.333333333333333
  FALSE                33     50                4               200
  TRUE                  0      5                1                15
       predictions_tree
        0.352941176470588 0.357142857142857 0.363636363636364 0.368421052631579
  FALSE                20                56                55                 9
  TRUE                  0                 2                 3                 2
       predictions_tree
        0.375 0.384615384615385 0.388888888888889   0.4 0.411764705882353
  FALSE    63                32                23    37                21
  TRUE      2                 3                 3     1                 2
       predictions_tree
        0.416666666666667 0.421052631578947 0.428571428571429 0.4375
  FALSE                21                26               145     10
  TRUE                  3                 2                 8      2
       predictions_tree
        0.444444444444444 0.454545454545455 0.461538461538462 0.466666666666667
  FALSE                59                32                 7                13
  TRUE                  4                 4                 2                 0
       predictions_tree
        0.470588235294118 0.473684210526316   0.5 0.533333333333333
  FALSE                 7                 7   114                 2
  TRUE                  0                 0    12                 2
       predictions_tree
        0.538461538461538 0.545454545454545 0.555555555555556 0.571428571428571
  FALSE                 3                17                22                26
  TRUE                  1                 1                 2                 4
       predictions_tree
        0.583333333333333 0.588235294117647   0.6 0.625 0.666666666666667   0.7
  FALSE                 6                 7    15    28                12     3
  TRUE                  1                 1     1     2                 0     0
       predictions_tree
        0.714285714285714  0.75 0.777777777777778   0.8
  FALSE                11    10                 1     7
  TRUE                  2     1                 0     0</code></pre>
</div>
</div>
</section>
<section id="create-a-roc-plot-with-auc-to-compare-the-two-models-performance-and-explain-to-nvo-what-the-plot-tells-you" class="level2">
<h2 class="anchored" data-anchor-id="create-a-roc-plot-with-auc-to-compare-the-two-models-performance-and-explain-to-nvo-what-the-plot-tells-you">Create a ROC plot (with AUC) to compare the two model’s performance and explain to NVO what the plot tells you</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ROC plot</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Ensure the target variable is a factor</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>train_data<span class="sc">$</span>respondedMailing <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(train_data<span class="sc">$</span>respondedMailing)</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>test_data<span class="sc">$</span>respondedMailing <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(test_data<span class="sc">$</span>respondedMailing)</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Retrain the Decision Tree Model</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>fit_tree <span class="ot">&lt;-</span> <span class="fu">rpart</span>(respondedMailing <span class="sc">~</span> ., <span class="at">data =</span> train_data, <span class="at">control =</span> control)</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Predict probabilities for the LASSO model</span></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>pred_lasso <span class="ot">&lt;-</span> <span class="fu">prediction</span>(probs_lasso, test_data<span class="sc">$</span>respondedMailing)</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>perf_lasso <span class="ot">&lt;-</span> <span class="fu">performance</span>(pred_lasso, <span class="st">"tpr"</span>, <span class="st">"fpr"</span>)</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Predict probabilities for the Decision Tree model</span></span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>probs_tree <span class="ot">&lt;-</span> <span class="fu">predict</span>(fit_tree, <span class="at">newdata =</span> test_data, <span class="at">type =</span> <span class="st">"prob"</span>)[, <span class="dv">2</span>]</span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>pred_tree <span class="ot">&lt;-</span> <span class="fu">prediction</span>(probs_tree, test_data<span class="sc">$</span>respondedMailing)</span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>perf_tree <span class="ot">&lt;-</span> <span class="fu">performance</span>(pred_tree, <span class="st">"tpr"</span>, <span class="st">"fpr"</span>)</span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot ROC curves</span></span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(perf_lasso, <span class="at">col =</span> <span class="st">"red"</span>)</span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(perf_tree, <span class="at">col =</span> <span class="st">"blue"</span>, <span class="at">add =</span> <span class="cn">TRUE</span>)</span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a><span class="fu">legend</span>(<span class="st">"bottomright"</span>, <span class="at">legend =</span> <span class="fu">c</span>(<span class="st">"LASSO"</span>, <span class="st">"Decision Tree"</span>), <span class="at">col =</span> <span class="fu">c</span>(<span class="st">"red"</span>, <span class="st">"blue"</span>), <span class="at">lty =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="ProblemSet4_files/figure-html/ROC Curve Comparison of LASSO and Decision Tree Models-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="pick-the-best-performing-model-and-view-its-precision-recall-chart-and-its-cumulative-gain-chart" class="level2">
<h2 class="anchored" data-anchor-id="pick-the-best-performing-model-and-view-its-precision-recall-chart-and-its-cumulative-gain-chart">Pick the best performing model, and view its precision recall chart and its cumulative gain chart</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># For LASSO</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>pr_lasso <span class="ot">&lt;-</span> <span class="fu">pr.curve</span>(<span class="at">scores.class0 =</span> probs_lasso, <span class="at">weights.class0 =</span> test_data<span class="sc">$</span>respondedMailing <span class="sc">==</span> <span class="st">"FALSE"</span>)</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="co"># For Decision Tree</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>probs_tree <span class="ot">&lt;-</span> <span class="fu">predict</span>(fit_tree, <span class="at">newdata =</span> test_data, <span class="at">type =</span> <span class="st">"prob"</span>)[, <span class="dv">2</span>]</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>pr_tree <span class="ot">&lt;-</span> <span class="fu">pr.curve</span>(<span class="at">scores.class0 =</span> probs_tree, <span class="at">weights.class0 =</span> test_data<span class="sc">$</span>respondedMailing <span class="sc">==</span> <span class="st">"FALSE"</span>)</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Compare the two models by AUC</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"AUC for LASSO:"</span>, pr_lasso<span class="sc">$</span>auc.integral, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>AUC for LASSO: 0.9362001 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"AUC for Decision Tree:"</span>, pr_tree<span class="sc">$</span>auc.integral, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>AUC for Decision Tree: 0.9376775 </code></pre>
</div>
</div>
</section>
<section id="use-the-charts-from-parts-6-and-7-to-describe-how-the-model-should-perform-for-nvo-and-what-it-could-mean-if-they-do-a-mailer-campaign-for-50000-people" class="level2">
<h2 class="anchored" data-anchor-id="use-the-charts-from-parts-6-and-7-to-describe-how-the-model-should-perform-for-nvo-and-what-it-could-mean-if-they-do-a-mailer-campaign-for-50000-people">Use the charts from parts 6 and 7 to describe how the model should perform for NVO and what it could mean if they do a mailer campaign for 50,000 people</h2>
<p>For NVO’s mailer campaign targeting 50,000 people, the model’s performance will be predicting likely potential donors. Given the ROC curves, if NVO were to use the LASSO model, they might expect a slightly higher true positive rate for a given false positive rate, compared to the Decision Tree model. This means that, among the people they reach out to, a higher proportion might be actual potential donors.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>